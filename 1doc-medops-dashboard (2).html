<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>1DOC MedOps Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @keyframes pulse{0%,100%{opacity:1}50%{opacity:.5}}.animate-pulse{animation:pulse 2s cubic-bezier(.4,0,.6,1) infinite}
    .dropdown-menu{display:none}.dropdown-menu.open{display:block}
  </style>
</head>
<body class="bg-gray-100 min-h-screen">
  <header class="bg-teal-600 text-white h-14 flex items-center px-6 shadow-md sticky top-0 z-30">
    <div class="flex items-center gap-2">
      <div class="w-8 h-8 bg-white rounded-lg flex items-center justify-center shadow"><span class="text-teal-600 font-bold text-lg">1</span></div>
      <span class="font-bold text-lg tracking-wide">1DOC MEDOPS</span>
    </div>
    <div class="flex-1"></div>
    <div class="flex items-center gap-6">
      <span class="text-teal-100 flex items-center gap-2 text-sm"><span class="w-2 h-2 bg-emerald-400 rounded-full animate-pulse"></span><span id="headerClinic">Mediline Serangoon</span></span>
      <div class="h-6 w-px bg-teal-400"></div>
      <div class="flex items-center gap-3">
        <div class="text-right"><p class="text-sm font-medium">Admin</p><p class="text-xs text-teal-200">MedOps Team</p></div>
        <div class="w-9 h-9 bg-teal-500 rounded-full flex items-center justify-center border-2 border-teal-400">
          <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/></svg>
        </div>
      </div>
    </div>
  </header>
  <div class="bg-white border-b border-gray-200 shadow-sm sticky top-14 z-20"><div class="flex overflow-x-auto" id="navTabs"></div></div>
  <div class="bg-white border-b border-gray-200 px-6 py-4">
    <h1 class="text-xl font-semibold text-gray-800" id="pageTitle">Daily Summary</h1>
    <div class="flex items-center gap-3 mt-3">
      <span class="text-sm text-gray-500">Viewing:</span>
      <div id="pills"></div>
      <div class="relative">
        <button onclick="toggleDropdown()" class="inline-flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50">Select Clinics
          <svg class="w-4 h-4" id="chevron" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
        </button>
        <div id="dropdown" class="dropdown-menu absolute top-full left-0 mt-2 w-80 bg-white rounded-xl border border-gray-200 shadow-xl z-50">
          <div class="p-3 border-b border-gray-100 bg-gray-50">
            <input type="text" id="search" placeholder="Search clinics..." oninput="render()" class="w-full px-3 py-2 border border-gray-200 rounded-lg text-sm">
          </div>
          <div class="max-h-72 overflow-y-auto" id="clinicList"></div>
          <div class="p-3 border-t border-gray-100 bg-gray-50 flex justify-between">
            <span class="text-xs text-gray-500" id="count"></span>
            <button onclick="toggleDropdown()" class="px-3 py-1.5 bg-teal-500 text-white rounded-lg text-sm font-medium">Done</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div id="dateBar" class="bg-gradient-to-r from-white to-emerald-50 border-b border-gray-200 px-6 py-3 flex items-center justify-between">
    <div class="flex items-center gap-3">
      <div class="w-10 h-10 bg-gradient-to-br from-teal-500 to-teal-600 rounded-xl flex items-center justify-center shadow-md">
        <svg class="w-5 h-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg>
      </div>
      <div><span class="font-semibold text-gray-800 text-lg">Yesterday's Closing Summary</span><p class="text-xs text-gray-500">Monday, 19 Jan 2026 ‚Ä¢ Today is Tuesday, 20 Jan 2026</p></div>
    </div>
    <div class="flex items-center gap-2 bg-gradient-to-r from-emerald-500 to-teal-500 text-white px-4 py-2 rounded-full shadow-lg"><span class="text-lg">üéâ</span><span class="font-semibold text-sm">Great Performance!</span></div>
  </div>
  <div class="p-6" id="content"></div>
  <div class="fixed bottom-4 right-4 bg-teal-500 text-white px-3 py-1.5 rounded-lg text-xs font-medium shadow-lg flex items-center gap-2"><span class="w-2 h-2 bg-white rounded-full animate-pulse"></span>Live Data</div>

<script>
let tab='daily',selected=['msg'],open=false;
const clinics=[{id:'msg',name:'Mediline Serangoon',short:'MSG'},{id:'mmp',name:'Mediline Medipoint',short:'MMP'},{id:'rdh',name:'RDH Clinic',short:'RDH'},{id:'tpy',name:'Toa Payoh Clinic',short:'TPY'},{id:'amk',name:'Ang Mo Kio Clinic',short:'AMK'},{id:'bd',name:'Bedok Clinic',short:'BD'},{id:'tp',name:'Tampines Clinic',short:'TP'},{id:'wl',name:'Woodlands Clinic',short:'WL'},{id:'jw',name:'Jurong West Clinic',short:'JW'},{id:'cck',name:'Choa Chu Kang Clinic',short:'CCK'}];
const data={
  msg:{mtd:145508.29,target:200000,daily:6450,variance:22958.29,today:10972.21,patients:70,doctors:[{name:'Dr Eugene Loke',initials:'EL',patients:56,revenue:10080.31},{name:'Dr Low',initials:'LW',patients:14,revenue:891.79}],payments:{paynow:2159.79,nets:672.45,app:4209.90,copay:3917.23,tpa:1549.90,chas:262.62}},
  mmp:{mtd:103571.94,target:150000,daily:4838.70,variance:11636.64,today:8738.61,patients:66,doctors:[{name:'Dr Lee Chien Nien',initials:'LCN',patients:31,revenue:4951.18},{name:'Dr Andre Ng',initials:'AN',patients:35,revenue:3787.43}],payments:{paynow:3117.08,nets:927.98,app:356.99,cash:561.51,tpa:2602.89,chas:491.01}},
  rdh:{mtd:103598.26,target:150000,daily:5770,variance:17048.26,today:14041.14,patients:64,doctors:[{name:'Dr Nigel',initials:'NG',patients:64,revenue:14041.14}],payments:{cash:441.27,amex:94.50,nets:239.03,visa:2646.94,mastercard:2862.34,paynow:399.03,app:1373.40,copay:8135.89}}
};
clinics.forEach((c,i)=>{if(!data[c.id])data[c.id]={mtd:80000+i*5000,target:150000,daily:4838,variance:10000+i*1000,today:5000+i*500,patients:30+i*3,doctors:[{name:'Dr Smith',initials:'SM',patients:30+i*3,revenue:5000+i*500}],payments:{paynow:2000,nets:1000,app:1500,copay:1000,tpa:500,chas:200}}});
const tabs=[{id:'daily',label:'Daily Summary',icon:'<svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M22 12h-4l-3 9L9 3l-3 9H2"/></svg>'},{id:'revenue',label:'Revenue Target',icon:'<svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><circle cx="12" cy="12" r="10" stroke-width="2"/><circle cx="12" cy="12" r="6" stroke-width="2"/><circle cx="12" cy="12" r="2" stroke-width="2"/></svg>'},{id:'flow',label:'Patient Flow',icon:'<svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/></svg>'},{id:'compare',label:'Compare',icon:'<svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/></svg>'},{id:'services',label:'Services',icon:'<svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.5 4.5l-1-1m1 1l-1 1m1-1L17 7m0 0l-3 3m3-3l1-1M14 10l-7 7m0 0l-2 2m2-2l2 2m-2-2H5m2 2v-2"/></svg>'},{id:'healthiersg',label:'HSG',icon:'<svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/></svg>'},{id:'whatsapp',label:'WhatsApp',icon:'<svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/></svg>'},{id:'askeva',label:'Ask Eva',icon:'<svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"/></svg>'},{id:'settings',label:'Settings',icon:'<svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/></svg>'}];
const services=[
  {name:'Influenza Vaccination',icon:'üíâ',today:12,week:68,mtd:185,trend:'+15%'},
  {name:'Shingles Vaccination',icon:'üõ°Ô∏è',today:3,week:14,mtd:39,trend:'+8%'},
  {name:'Health Screening',icon:'üìã',today:7,week:33,mtd:92,trend:'+22%'}
];
const promos=[
  {tag:'NKF-RENAL',name:'NKF Renal Screening',signups:26,done:18,percent:69},
  {tag:'BUZUD-CGM',name:'BUZUD CGM Promo',signups:33,done:25,percent:76}
];
const payLabels={paynow:'PayNow',nets:'NETS',app:'1doc App',copay:'Co-pay',cash:'Cash',tpa:'TPA',chas:'CHAS',visa:'Visa',mastercard:'MC',amex:'AMEX'};
const payColors={paynow:'bg-teal-500',nets:'bg-blue-500',app:'bg-violet-500',copay:'bg-amber-500',cash:'bg-emerald-500',tpa:'bg-orange-500',chas:'bg-pink-500',visa:'bg-indigo-500',mastercard:'bg-red-500',amex:'bg-sky-500'};
const fmt=n=>n.toLocaleString('en-US',{minimumFractionDigits:2,maximumFractionDigits:2});

function get(){
  if(selected.length===1)return data[selected[0]];
  return{mtd:selected.reduce((s,id)=>s+(data[id]?.mtd||0),0),target:selected.reduce((s,id)=>s+(data[id]?.target||0),0),variance:selected.reduce((s,id)=>s+(data[id]?.variance||0),0),today:selected.reduce((s,id)=>s+(data[id]?.today||0),0),daily:selected.reduce((s,id)=>s+(data[id]?.daily||0),0),patients:selected.reduce((s,id)=>s+(data[id]?.patients||0),0),doctors:selected.flatMap(id=>data[id]?.doctors||[]),payments:Object.keys(payLabels).reduce((a,k)=>{a[k]=selected.reduce((s,id)=>s+(data[id]?.payments?.[k]||0),0);return a},{})};
}

function toggleDropdown(){open=!open;document.getElementById('dropdown').classList.toggle('open',open);document.getElementById('chevron').style.transform=open?'rotate(180deg)':'';}
function toggle(id){if(selected.includes(id)){if(selected.length>1)selected=selected.filter(x=>x!==id)}else selected=[...selected,id];render();}
function setTab(t){tab=t;document.getElementById('dateBar').style.display=t==='daily'?'flex':'none';render();}
function updateTarget(id,value){data[id].target=parseInt(value)||0;render();}
function resetTargets(){data.msg.target=200000;data.mmp.target=150000;data.rdh.target=150000;render();}

function render(){
  const d=get(),search=document.getElementById('search')?.value?.toLowerCase()||'';
  let list=clinics.filter(c=>c.name.toLowerCase().includes(search)||c.short.toLowerCase().includes(search)).sort((a,b)=>a.name.localeCompare(b.name));
  const sel=list.filter(c=>selected.includes(c.id)),unsel=list.filter(c=>!selected.includes(c.id));list=[...sel,...unsel];
  const colors=['from-teal-400 to-teal-600','from-purple-400 to-purple-600','from-orange-400 to-orange-600','from-blue-400 to-blue-600','from-pink-400 to-pink-600','from-emerald-400 to-emerald-600'];
  
  document.getElementById('navTabs').innerHTML=tabs.map(t=>`<button onclick="setTab('${t.id}')" class="flex items-center gap-2 px-5 py-3.5 text-sm font-medium whitespace-nowrap border-b-2 transition-all ${tab===t.id?'border-teal-500 text-teal-600 bg-teal-50':'border-transparent text-gray-500 hover:bg-gray-50'}">${t.icon}${t.label}</button>`).join('');
  document.getElementById('pageTitle').textContent=tabs.find(t=>t.id===tab)?.label||'';
  document.getElementById('headerClinic').textContent=selected.length===1?clinics.find(c=>c.id===selected[0])?.name:`${selected.length} Clinics`;
  document.getElementById('pills').innerHTML=selected.length>3?`<span class="px-3 py-1.5 bg-teal-100 text-teal-700 rounded-full text-sm font-medium">${selected.length} Clinics</span>`:selected.map(id=>{const c=clinics.find(x=>x.id===id);return`<span class="inline-flex items-center gap-1 px-3 py-1.5 bg-teal-100 text-teal-700 rounded-full text-sm font-medium">${c?.short}${selected.length>1?`<button onclick="toggle('${id}')" class="ml-1 w-4 h-4 rounded-full bg-teal-200 hover:bg-teal-300 flex items-center justify-center">√ó</button>`:''}</span>`}).join(' ');
  document.getElementById('clinicList').innerHTML=list.map((c,i)=>`<button onclick="toggle('${c.id}')" class="w-full flex items-center gap-3 px-4 py-2.5 hover:bg-gray-50 border-b border-gray-50"><div class="w-5 h-5 rounded border-2 flex items-center justify-center ${selected.includes(c.id)?'bg-teal-500 border-teal-500':'border-gray-300'}">${selected.includes(c.id)?'<svg class="w-3 h-3 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"/></svg>':''}</div><div class="w-9 h-9 rounded-lg flex items-center justify-center text-white font-bold text-xs shadow-sm bg-gradient-to-br ${colors[i%6]}">${c.short}</div><span class="text-sm font-medium text-gray-900">${c.name}</span></button>`).join('');
  document.getElementById('count').textContent=`${selected.length} of ${clinics.length} selected`;

  if(tab==='daily'){
    document.getElementById('content').innerHTML=`
      <div class="space-y-6">
        <div class="grid grid-cols-2 lg:grid-cols-4 gap-4">
          <div class="bg-white rounded-xl p-5 border border-gray-200 shadow-sm">
            <div class="flex items-center gap-3 mb-3"><div class="w-12 h-12 bg-gradient-to-br from-teal-400 to-teal-600 rounded-xl flex items-center justify-center shadow-lg"><svg class="w-6 h-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8V7m0 1v8m0 0v1"/></svg></div><span class="text-sm text-gray-500">MTD Revenue</span></div>
            <p class="text-2xl font-bold text-gray-900">S$${fmt(d.mtd)}</p>
            <p class="text-sm text-emerald-600 mt-1">+S$${fmt(d.variance)} above expected</p>
          </div>
          <div class="bg-white rounded-xl p-5 border border-gray-200 shadow-sm">
            <div class="flex items-center gap-3 mb-3"><div class="w-12 h-12 bg-gradient-to-br from-purple-400 to-purple-600 rounded-xl flex items-center justify-center shadow-lg"><svg class="w-6 h-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"/></svg></div><span class="text-sm text-gray-500">Patients Yesterday</span></div>
            <p class="text-2xl font-bold text-gray-900">${d.patients}</p>
            <p class="text-sm text-purple-600 mt-1">${d.doctors.length} doctors on duty</p>
          </div>
          <div class="bg-white rounded-xl p-5 border border-gray-200 shadow-sm">
            <div class="flex items-center gap-3 mb-3"><div class="w-12 h-12 bg-gradient-to-br from-blue-400 to-blue-600 rounded-xl flex items-center justify-center shadow-lg"><svg class="w-6 h-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M22 12h-4l-3 9L9 3l-3 9H2"/></svg></div><span class="text-sm text-gray-500">Today's Revenue</span></div>
            <p class="text-2xl font-bold text-gray-900">S$${fmt(d.today)}</p>
            <p class="text-sm text-blue-600 mt-1">Daily target: S$${fmt(d.daily)}</p>
          </div>
          <div class="bg-white rounded-xl p-5 border border-gray-200 shadow-sm">
            <div class="flex items-center gap-3 mb-3"><div class="w-12 h-12 bg-gradient-to-br from-emerald-400 to-emerald-600 rounded-xl flex items-center justify-center shadow-lg"><svg class="w-6 h-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><circle cx="12" cy="12" r="10" stroke-width="2"/><circle cx="12" cy="12" r="6" stroke-width="2"/><circle cx="12" cy="12" r="2" stroke-width="2"/></svg></div><span class="text-sm text-gray-500">Target Progress</span></div>
            <p class="text-2xl font-bold text-gray-900">${((d.mtd/d.target)*100).toFixed(1)}%</p>
            <div class="mt-2 bg-gray-200 rounded-full h-2.5"><div class="bg-gradient-to-r from-emerald-400 to-teal-500 h-full rounded-full" style="width:${Math.min((d.mtd/d.target)*100,100)}%"></div></div>
          </div>
        </div>
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
          <div class="bg-white rounded-xl border border-gray-200 shadow-sm">
            <div class="px-5 py-4 border-b border-gray-100"><h3 class="font-semibold text-gray-800">Doctor Performance</h3></div>
            <div class="p-5 space-y-3">${d.doctors.map(doc=>`<div class="flex items-center gap-4 p-4 bg-gray-50 rounded-xl"><div class="w-12 h-12 bg-gradient-to-br from-teal-500 to-cyan-500 rounded-xl flex items-center justify-center text-white font-bold shadow-lg">${doc.initials}</div><div class="flex-1"><p class="font-semibold text-gray-900">${doc.name}</p><p class="text-sm text-gray-500">${doc.patients} patients</p></div><div class="text-right"><p class="font-bold text-lg text-gray-900">S$${fmt(doc.revenue)}</p></div></div>`).join('')}</div>
          </div>
          <div class="bg-white rounded-xl border border-gray-200 shadow-sm">
            <div class="px-5 py-4 border-b border-gray-100"><h3 class="font-semibold text-gray-800">Payment Breakdown</h3></div>
            <div class="p-5 grid grid-cols-2 gap-3">${Object.entries(d.payments).filter(([k,v])=>v>0).map(([k,v])=>{const tot=Object.values(d.payments).reduce((a,b)=>a+b,0),pct=((v/tot)*100).toFixed(1);return`<div class="p-4 bg-gray-50 rounded-xl"><div class="flex items-center gap-2 mb-2"><div class="w-3 h-3 ${payColors[k]||'bg-gray-500'} rounded-full"></div><span class="text-sm font-medium text-gray-700">${payLabels[k]||k}</span></div><p class="text-xl font-bold text-gray-900">S$${fmt(v)}</p><div class="flex items-center gap-2 mt-1"><div class="flex-1 bg-gray-200 rounded-full h-1.5"><div class="${payColors[k]||'bg-gray-500'} h-1.5 rounded-full" style="width:${pct}%"></div></div><span class="text-xs text-gray-500">${pct}%</span></div></div>`}).join('')}</div>
          </div>
        </div>
      </div>`;
  }else if(tab==='revenue'){
    const d=get();
    const target=d.target/1000,mtd=d.mtd/1000,gap=Math.max(0,(d.target-d.mtd)/1000),trial=Math.round(d.mtd*1.26/1000),delta=Math.round(trial-target);
    document.getElementById('content').innerHTML=`
      <div class="space-y-6">
        <div class="grid grid-cols-2 lg:grid-cols-6 gap-4">
          ${[{icon:'üéØ',label:'Target',value:'S$'+target+'k',color:'from-teal-400 to-teal-600'},{icon:'üìà',label:'MTD',value:'S$'+Math.round(mtd)+'k',color:'from-purple-400 to-purple-600'},{icon:'üìä',label:'Gap',value:'S$'+Math.round(gap)+'k',color:'from-blue-400 to-blue-600'},{icon:'üöÄ',label:'Trial',value:'S$'+trial+'k',color:'from-emerald-400 to-emerald-600'},{icon:'‚ö°',label:'Delta',value:'S$'+delta+'k',color:'from-amber-400 to-amber-600'},{icon:'üìÖ',label:'Days',value:'11',color:'from-rose-400 to-rose-600'}].map(s=>`
            <div class="bg-white rounded-xl p-5 border border-gray-200 shadow-sm text-center">
              <div class="w-12 h-12 bg-gradient-to-br ${s.color} rounded-xl flex items-center justify-center shadow-lg mx-auto mb-3"><span class="text-xl">${s.icon}</span></div>
              <p class="text-xs text-gray-500">${s.label}</p>
              <p class="text-xl font-bold text-gray-900 mt-1">${s.value}</p>
            </div>
          `).join('')}
        </div>
        <div class="bg-white rounded-xl border border-gray-200 shadow-sm">
          <div class="px-5 py-4 border-b border-gray-100"><h3 class="font-semibold text-gray-800 flex items-center gap-2"><span class="w-3 h-3 bg-gradient-to-r from-teal-400 to-teal-600 rounded-full"></span>Service Opportunities</h3></div>
          <div class="divide-y divide-gray-100">
            ${[{icon:'ü©∫',name:'SICK REVIEW',price:'S$60',add:'+500'},{icon:'üíâ',name:'INFLUENZA VAX',price:'S$45',add:'+667'},{icon:'üõ°Ô∏è',name:'SHINGLES VAX',price:'S$280',add:'+108'},{icon:'üìã',name:'HEALTH SCREENING',price:'S$180',add:'+167'},{icon:'ü´ò',name:'NKF RENAL',price:'S$25',add:'+1200'},{icon:'üìä',name:'BUZUD CGM',price:'S$90',add:'+334'}].map(s=>`
              <div class="flex items-center justify-between px-5 py-4 hover:bg-gray-50 transition-colors">
                <div class="flex items-center gap-4">
                  <div class="w-10 h-10 bg-gray-100 rounded-xl flex items-center justify-center"><span class="text-lg">${s.icon}</span></div>
                  <div><p class="font-semibold text-gray-800">${s.name}</p><p class="text-sm text-gray-500">${s.price}</p></div>
                </div>
                <div class="flex items-center gap-3"><span class="text-emerald-600 font-bold">${s.add}</span><div class="w-8 h-8 bg-gradient-to-br from-emerald-400 to-emerald-600 rounded-full flex items-center justify-center shadow"><svg class="w-4 h-4 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg></div></div>
              </div>
            `).join('')}
          </div>
        </div>
      </div>`;
  }else if(tab==='flow'){
    const d=get();
    document.getElementById('content').innerHTML=`
      <div class="space-y-6">
        <div class="grid grid-cols-2 lg:grid-cols-4 gap-4">
          <div class="bg-white rounded-xl p-5 border border-gray-200 shadow-sm">
            <div class="flex items-center gap-3 mb-3"><div class="w-12 h-12 bg-gradient-to-br from-blue-400 to-blue-600 rounded-xl flex items-center justify-center shadow-lg"><svg class="w-6 h-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg></div><span class="text-sm text-gray-500">Avg Wait</span></div>
            <p class="text-2xl font-bold text-gray-900">15 <span class="text-lg text-gray-500">min</span></p>
            <p class="text-sm text-amber-500 mt-1">‚ö° Efficiency target</p>
          </div>
          <div class="bg-white rounded-xl p-5 border border-gray-200 shadow-sm">
            <div class="flex items-center gap-3 mb-3"><div class="w-12 h-12 bg-gradient-to-br from-teal-400 to-teal-600 rounded-xl flex items-center justify-center shadow-lg"><svg class="w-6 h-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg></div><span class="text-sm text-gray-500">Throughput</span></div>
            <p class="text-2xl font-bold text-gray-900">31.5 <span class="text-lg text-gray-500">min</span></p>
            <p class="text-sm text-teal-600 mt-1">Per patient avg</p>
          </div>
          <div class="bg-white rounded-xl p-5 border border-gray-200 shadow-sm">
            <div class="flex items-center gap-3 mb-3"><div class="w-12 h-12 bg-gradient-to-br from-purple-400 to-purple-600 rounded-xl flex items-center justify-center shadow-lg"><svg class="w-6 h-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"/></svg></div><span class="text-sm text-gray-500">Total Patients</span></div>
            <p class="text-2xl font-bold text-gray-900">${d.patients}</p>
            <p class="text-sm text-purple-600 mt-1">Yesterday</p>
          </div>
          <div class="bg-white rounded-xl p-5 border border-gray-200 shadow-sm">
            <div class="flex items-center gap-3 mb-3"><div class="w-12 h-12 bg-gradient-to-br from-emerald-400 to-emerald-600 rounded-xl flex items-center justify-center shadow-lg"><svg class="w-6 h-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg></div><span class="text-sm text-gray-500">P95 Wait</span></div>
            <p class="text-2xl font-bold text-gray-900">25 <span class="text-lg text-gray-500">min</span></p>
            <p class="text-sm text-emerald-600 mt-1">95th percentile</p>
          </div>
        </div>
        <div class="bg-white rounded-xl border border-gray-200 shadow-sm">
          <div class="px-5 py-4 border-b border-gray-100"><h3 class="font-semibold text-gray-800 flex items-center gap-2"><span class="w-3 h-3 bg-gradient-to-r from-blue-400 to-blue-600 rounded-full"></span>Doctor Efficiency</h3></div>
          <div class="divide-y divide-gray-100">
            ${d.doctors.map((doc,i)=>{
              const wait=doc.patients>40?12:18,thru=doc.patients>40?28:35,p95=doc.patients>40?25:42;
              const colors=['from-teal-500 to-cyan-500','from-purple-500 to-violet-500','from-blue-500 to-indigo-500'];
              return`
              <div class="px-5 py-4">
                <div class="flex items-center gap-4 mb-4">
                  <div class="w-12 h-12 bg-gradient-to-br ${colors[i%3]} rounded-xl flex items-center justify-center text-white font-bold shadow-lg">${doc.initials}</div>
                  <p class="font-semibold text-gray-800">${doc.name}</p>
                </div>
                <div class="grid grid-cols-4 gap-3">
                  <div class="bg-gray-50 rounded-xl p-3 text-center"><p class="text-xs text-gray-500">Patients</p><p class="text-lg font-bold text-blue-600">${doc.patients}</p></div>
                  <div class="bg-gray-50 rounded-xl p-3 text-center"><p class="text-xs text-gray-500">Wait</p><p class="text-lg font-bold text-emerald-600">${wait}m</p></div>
                  <div class="bg-gray-50 rounded-xl p-3 text-center"><p class="text-xs text-gray-500">Throughput</p><p class="text-lg font-bold text-amber-600">${thru}m</p></div>
                  <div class="bg-gray-50 rounded-xl p-3 text-center"><p class="text-xs text-gray-500">P95</p><p class="text-lg font-bold text-rose-600">${p95}m</p></div>
                </div>
              </div>
            `}).join('')}
          </div>
        </div>
      </div>`;
  }else if(tab==='compare'){
    document.getElementById('content').innerHTML=`
      <div class="space-y-6">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
          ${[
            {rank:'ü•á',short:'MSG',name:'Mediline Serangoon',revenue:'S$'+Math.round(data.msg.mtd/1000)+'k',patients:data.msg.patients+'/day',wait:'13 min',color:'from-amber-400 to-amber-600',highlight:true},
            {rank:'ü•à',short:'MMP',name:'Mediline Medipoint',revenue:'S$'+Math.round(data.mmp.mtd/1000)+'k',patients:data.mmp.patients+'/day',wait:'12 min',color:'from-gray-300 to-gray-400',highlight:false},
            {rank:'ü•â',short:'RDH',name:'RDH Clinic',revenue:'S$'+Math.round(data.rdh.mtd/1000)+'k',patients:data.rdh.patients+'/day',wait:'11 min',color:'from-orange-400 to-orange-600',highlight:false}
          ].map(c=>`
            <div class="bg-white rounded-xl border-2 ${c.highlight?'border-amber-400 shadow-lg':'border-gray-200 shadow-sm'} p-5">
              <div class="flex items-center justify-between mb-4">
                <div class="flex items-center gap-3">
                  <span class="text-3xl">${c.rank}</span>
                  <div>
                    <div class="flex items-center gap-2">
                      <div class="w-8 h-8 bg-gradient-to-br ${c.color} rounded-lg flex items-center justify-center text-white font-bold text-xs shadow">${c.short}</div>
                      <p class="font-bold text-gray-900">${c.short}</p>
                    </div>
                    <p class="text-xs text-gray-500">${c.name}</p>
                  </div>
                </div>
                <p class="text-xl font-bold text-emerald-500">${c.revenue}</p>
              </div>
              <div class="grid grid-cols-2 gap-3">
                <div class="bg-gray-50 rounded-xl p-3 text-center"><p class="text-xs text-gray-500">Patients</p><p class="font-bold text-gray-900">${c.patients}</p></div>
                <div class="bg-gray-50 rounded-xl p-3 text-center"><p class="text-xs text-gray-500">Wait</p><p class="font-bold text-gray-900">${c.wait}</p></div>
              </div>
            </div>
          `).join('')}
        </div>
      </div>`;
  }else if(tab==='services'){
    document.getElementById('content').innerHTML=`
      <div class="space-y-6">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
          ${services.map((s,i)=>{const colors=['from-teal-400 to-teal-600','from-purple-400 to-purple-600','from-blue-400 to-blue-600'];return`
            <div class="bg-white rounded-xl border border-gray-200 shadow-sm p-5">
              <div class="flex items-center justify-between mb-4">
                <div class="flex items-center gap-3">
                  <div class="w-10 h-10 bg-gradient-to-br ${colors[i%3]} rounded-xl flex items-center justify-center shadow"><span class="text-lg">${s.icon}</span></div>
                  <span class="font-semibold text-gray-800">${s.name}</span>
                </div>
                <span class="px-2 py-1 bg-emerald-100 text-emerald-700 text-xs font-semibold rounded-full">${s.trend}</span>
              </div>
              <div class="grid grid-cols-3 gap-2">
                <div class="bg-gray-50 rounded-xl p-3 text-center"><p class="text-xs text-gray-500">Today</p><p class="text-xl font-bold text-teal-600">${s.today}</p></div>
                <div class="bg-gray-50 rounded-xl p-3 text-center"><p class="text-xs text-gray-500">7 Days</p><p class="text-xl font-bold text-purple-600">${s.week}</p></div>
                <div class="bg-gray-50 rounded-xl p-3 text-center"><p class="text-xs text-gray-500">MTD</p><p class="text-xl font-bold text-emerald-600">${s.mtd}</p></div>
              </div>
            </div>
          `}).join('')}
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          ${promos.map((p,i)=>{const colors=['from-emerald-400 to-emerald-600','from-teal-400 to-teal-600'];return`
            <div class="bg-white rounded-xl border border-gray-200 shadow-sm p-5">
              <div class="flex items-center justify-between">
                <div class="flex items-center gap-4">
                  <div class="w-12 h-12 bg-gradient-to-br ${colors[i%2]} rounded-xl flex items-center justify-center shadow-lg"><span class="text-white font-bold text-xs">${p.tag.substring(0,3)}</span></div>
                  <div>
                    <p class="font-semibold text-gray-800">${p.name}</p>
                    <p class="text-sm text-gray-500 mt-1">Signups: <span class="font-semibold text-gray-800">${p.signups}</span> &nbsp; Done: <span class="font-semibold text-emerald-600">${p.done}</span></p>
                  </div>
                </div>
                <div class="text-right">
                  <p class="text-3xl font-bold text-emerald-500">${p.percent}%</p>
                  <div class="w-20 bg-gray-200 rounded-full h-2 mt-2"><div class="bg-gradient-to-r from-emerald-400 to-teal-500 h-2 rounded-full" style="width:${p.percent}%"></div></div>
                </div>
              </div>
            </div>
          `}).join('')}
        </div>
      </div>`;
  }else if(tab==='healthiersg'){
    const selClinic=selected.length===1?clinics.find(c=>c.id===selected[0]):clinics[0];
    const clinicName=selClinic?.name||'Mediline Serangoon';
    const shortName=selClinic?.short||'MSG';
    document.getElementById('content').innerHTML=`
      <div class="space-y-6">
        <div class="bg-white rounded-xl border border-gray-200 shadow-sm p-6">
          <div class="flex items-center gap-4 mb-6">
            <div class="w-14 h-14 bg-gradient-to-br from-rose-400 to-rose-600 rounded-xl flex items-center justify-center shadow-lg"><span class="text-2xl">üè•</span></div>
            <div><p class="font-bold text-gray-900 text-lg">${shortName} Clinic</p><p class="text-sm text-gray-500">${clinicName}</p></div>
          </div>
          <div class="grid grid-cols-2 gap-4">
            <div class="bg-gradient-to-br from-blue-50 to-teal-50 rounded-xl p-6 text-center border border-teal-200">
              <div class="w-12 h-12 bg-gradient-to-br from-teal-400 to-teal-600 rounded-xl flex items-center justify-center shadow-lg mx-auto mb-3"><svg class="w-6 h-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/></svg></div>
              <p class="text-sm text-gray-600">Plans Due (3m)</p>
              <p class="text-4xl font-bold text-teal-500 mt-2">128</p>
            </div>
            <div class="bg-gradient-to-br from-rose-50 to-rose-100 rounded-xl p-6 text-center border border-rose-200">
              <div class="w-12 h-12 bg-gradient-to-br from-rose-400 to-rose-600 rounded-xl flex items-center justify-center shadow-lg mx-auto mb-3"><svg class="w-6 h-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/></svg></div>
              <p class="text-sm text-gray-600">Reports Due (1m)</p>
              <p class="text-4xl font-bold text-rose-500 mt-2">44</p>
            </div>
          </div>
        </div>
      </div>`;
  }else if(tab==='whatsapp'){
    document.getElementById('content').innerHTML=`
      <div class="space-y-6">
        <div class="grid grid-cols-2 lg:grid-cols-5 gap-4">
          ${[{label:'Sent',value:'1,240',sub:'MTD',color:'from-emerald-400 to-emerald-600'},{label:'Delivered',value:'90%',sub:'1,112',color:'from-teal-400 to-teal-600'},{label:'Read',value:'73%',sub:'892',color:'from-blue-400 to-blue-600'},{label:'Replied',value:'21%',sub:'268',color:'from-purple-400 to-purple-600'},{label:'Avg Response',value:'2h 14m',sub:'',color:'from-amber-400 to-amber-600'}].map(s=>`
            <div class="bg-white rounded-xl p-5 border border-gray-200 shadow-sm text-center">
              <div class="w-10 h-10 bg-gradient-to-br ${s.color} rounded-xl flex items-center justify-center shadow mx-auto mb-3"><svg class="w-5 h-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/></svg></div>
              <p class="text-xs text-gray-500">${s.label}</p>
              <p class="text-2xl font-bold text-gray-900">${s.value}</p>
              ${s.sub?`<p class="text-xs text-gray-400">${s.sub}</p>`:''}
            </div>
          `).join('')}
        </div>
        <div class="bg-white rounded-xl border border-gray-200 shadow-sm">
          <div class="px-5 py-4 border-b border-gray-100"><h3 class="font-semibold text-gray-800 flex items-center gap-2"><span class="w-3 h-3 bg-gradient-to-r from-emerald-400 to-emerald-600 rounded-full"></span>Recent Messages</h3></div>
          <div class="divide-y divide-gray-100">
            ${[{name:'John T',coach:'Sulin',time:'Today 11:05',status:'Replied',color:'bg-emerald-500'},{name:'Mdm Wong',coach:'Aida',time:'Yesterday',status:'Read',color:'bg-blue-500'},{name:'Mr Lim',coach:'Hana',time:'Yesterday',status:'Sent',color:'bg-gray-400'}].map(m=>`
              <div class="flex items-center justify-between px-5 py-4 hover:bg-gray-50 transition-colors">
                <div class="flex items-center gap-4">
                  <div class="w-10 h-10 bg-gradient-to-br from-gray-200 to-gray-300 rounded-full flex items-center justify-center text-gray-600 font-bold">${m.name.split(' ').map(n=>n[0]).join('')}</div>
                  <div><p class="font-semibold text-gray-800">${m.name}</p><p class="text-sm text-gray-500">${m.coach} ‚Ä¢ ${m.time}</p></div>
                </div>
                <div class="flex items-center gap-2">
                  <span class="px-3 py-1 ${m.color} text-white text-xs font-medium rounded-full">${m.status}</span>
                  <button class="px-3 py-1 bg-gradient-to-r from-emerald-500 to-teal-500 text-white text-xs font-medium rounded-full shadow">Open</button>
                </div>
              </div>
            `).join('')}
          </div>
        </div>
      </div>`;
  }else if(tab==='askeva'){
    document.getElementById('content').innerHTML=`
      <div class="space-y-6">
        <div class="bg-white rounded-xl border border-gray-200 shadow-sm p-6">
          <div class="flex items-center gap-4 mb-6">
            <div class="w-14 h-14 bg-gradient-to-br from-purple-400 to-purple-600 rounded-full flex items-center justify-center shadow-lg"><span class="text-2xl">‚ú®</span></div>
            <div><p class="font-bold text-gray-900">Eva</p><p class="text-sm text-gray-500 flex items-center gap-2"><span class="w-2 h-2 bg-emerald-400 rounded-full animate-pulse"></span>Online ‚Ä¢ Ready to help</p></div>
          </div>
          <div class="bg-gradient-to-r from-gray-50 to-purple-50 rounded-xl p-4 mb-6 border border-gray-100">
            <p class="text-gray-700">Hi! I'm Eva, your Enterprise Virtual Assistant. How can I help you today?</p>
          </div>
          <div class="grid grid-cols-2 md:grid-cols-3 gap-3 mb-6">
            ${[{icon:'üìä',label:'Revenue summary',color:'from-teal-400 to-teal-600'},{icon:'üë•',label:'Patient stats',color:'from-purple-400 to-purple-600'},{icon:'üìÖ',label:'Appointments',color:'from-blue-400 to-blue-600'},{icon:'üíâ',label:'Vaccinations',color:'from-emerald-400 to-emerald-600'},{icon:'üìà',label:'Insights',color:'from-amber-400 to-amber-600'},{icon:'üè•',label:'Clinic compare',color:'from-rose-400 to-rose-600'}].map(q=>`
              <button class="flex items-center gap-3 p-4 bg-white border border-gray-200 rounded-xl hover:bg-gray-50 hover:border-gray-300 transition-all text-left shadow-sm">
                <div class="w-8 h-8 bg-gradient-to-br ${q.color} rounded-lg flex items-center justify-center shadow"><span class="text-sm">${q.icon}</span></div>
                <span class="text-sm text-gray-700 font-medium">${q.label}</span>
              </button>
            `).join('')}
          </div>
          <div class="flex gap-3">
            <input type="text" placeholder="Ask Eva anything..." class="flex-1 px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent">
            <button class="px-6 py-3 bg-gradient-to-r from-teal-500 to-teal-600 text-white rounded-xl font-medium flex items-center gap-2 shadow-lg hover:shadow-xl transition-shadow">
              <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"/></svg>
              Send
            </button>
          </div>
        </div>
      </div>`;
  }else if(tab==='settings'){
    const selClinics=selected.map(id=>({id,clinic:clinics.find(c=>c.id===id)?.short,name:clinics.find(c=>c.id===id)?.name,target:data[id]?.target||150000}));
    const colors=['from-teal-400 to-teal-600','from-purple-400 to-purple-600','from-orange-400 to-orange-600','from-blue-400 to-blue-600','from-pink-400 to-pink-600','from-emerald-400 to-emerald-600'];
    document.getElementById('content').innerHTML=`
      <div class="space-y-6">
        <div class="bg-white rounded-xl border border-gray-200 shadow-sm">
          <div class="px-5 py-4 border-b border-gray-100"><h3 class="font-semibold text-gray-800 flex items-center gap-2"><span class="w-3 h-3 bg-gradient-to-r from-teal-400 to-teal-600 rounded-full"></span>Yearly Revenue Targets</h3></div>
          <div class="p-5 space-y-3">
            ${selClinics.map((t,i)=>`
              <div class="flex items-center justify-between p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors">
                <div class="flex items-center gap-3">
                  <div class="w-10 h-10 bg-gradient-to-br ${colors[i%6]} rounded-lg flex items-center justify-center text-white font-bold text-xs shadow">${t.clinic}</div>
                  <div><p class="font-medium text-gray-800">${t.clinic}</p><p class="text-xs text-gray-500">${t.name}</p></div>
                </div>
                <div class="flex items-center gap-2">
                  <span class="text-gray-500 text-sm">S$</span>
                  <input type="number" id="target-${t.id}" value="${t.target}" step="10000" min="0" 
                    class="w-32 px-3 py-2 border border-gray-200 rounded-lg text-right font-bold text-gray-900 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent"
                    onchange="updateTarget('${t.id}', this.value)">
                  <span class="text-gray-500 text-sm">/month</span>
                </div>
              </div>
            `).join('')}
          </div>
          <div class="px-5 py-4 border-t border-gray-100 bg-gray-50 rounded-b-xl">
            <div class="flex items-center justify-between">
              <p class="text-sm text-gray-500">Changes are saved automatically</p>
              <button onclick="resetTargets()" class="px-4 py-2 text-sm font-medium text-gray-600 hover:text-gray-800 hover:bg-gray-200 rounded-lg transition-colors">Reset to Defaults</button>
            </div>
          </div>
        </div>
        <div class="bg-white rounded-xl border border-gray-200 shadow-sm">
          <div class="px-5 py-4 border-b border-gray-100"><h3 class="font-semibold text-gray-800 flex items-center gap-2"><span class="w-3 h-3 bg-gradient-to-r from-purple-400 to-purple-600 rounded-full"></span>Target Summary</h3></div>
          <div class="p-5">
            <div class="grid grid-cols-${Math.min(selClinics.length,3)} gap-4">
              ${selClinics.map((t,i)=>{
                const d=data[t.id];
                const pct=((d.mtd/d.target)*100).toFixed(1);
                return`
                <div class="text-center p-4 bg-gray-50 rounded-xl">
                  <div class="w-10 h-10 bg-gradient-to-br ${colors[i%6]} rounded-lg flex items-center justify-center text-white font-bold text-xs shadow mx-auto mb-2">${t.clinic}</div>
                  <p class="text-2xl font-bold text-gray-900">${pct}%</p>
                  <p class="text-xs text-gray-500 mt-1">S$${fmt(d.mtd)} / S$${(d.target/1000)}k</p>
                  <div class="mt-2 bg-gray-200 rounded-full h-2">
                    <div class="bg-gradient-to-r ${colors[i%6]} h-full rounded-full" style="width:${Math.min(pct,100)}%"></div>
                  </div>
                </div>
              `}).join('')}
            </div>
          </div>
        </div>
      </div>`;
  }else{
    document.getElementById('content').innerHTML=`<div class="bg-white rounded-xl border border-gray-200 shadow-sm p-12 text-center"><div class="w-20 h-20 bg-gradient-to-br from-teal-400 to-teal-600 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg"><svg class="w-10 h-10 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/></svg></div><h3 class="text-xl font-semibold text-gray-800 mb-2">${tabs.find(t=>t.id===tab)?.label}</h3><p class="text-gray-500">Content coming soon...</p></div>`;
  }
}
document.addEventListener('DOMContentLoaded',render);
document.addEventListener('click',e=>{if(open&&!e.target.closest('#dropdown')&&!e.target.closest('button[onclick="toggleDropdown()"]')){open=false;document.getElementById('dropdown').classList.remove('open');document.getElementById('chevron').style.transform='';}});
</script>
</body>
</html>
