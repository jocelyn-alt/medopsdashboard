<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>1DOC MedOps Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @keyframes pulse{0%,100%{opacity:1}50%{opacity:.5}}.animate-pulse{animation:pulse 2s cubic-bezier(.4,0,.6,1) infinite}
    .dropdown-menu{display:none}.dropdown-menu.open{display:block}
  </style>
</head>
<body class="bg-gray-100 min-h-screen">
  <header class="bg-teal-600 text-white h-14 flex items-center px-4 shadow-md sticky top-0 z-30">
    <div class="flex items-center gap-2">
      <div class="w-8 h-8 bg-white rounded-lg flex items-center justify-center shadow"><span class="text-teal-600 font-bold text-lg">1</span></div>
      <span class="font-bold text-lg tracking-wide">1DOC MEDOPS</span>
    </div>
    <div class="flex-1"></div>
    <nav class="hidden lg:flex items-center gap-6 text-sm">
      <span class="text-teal-200 flex items-center gap-2"><span class="w-2 h-2 bg-emerald-400 rounded-full animate-pulse"></span><span id="headerClinic">Mediline Serangoon</span></span>
    </nav>
    <div class="flex items-center gap-3 ml-4">
      <div class="text-right hidden sm:block"><p class="text-sm font-medium">Admin</p><p class="text-xs text-teal-200">MedOps Team</p></div>
      <div class="w-9 h-9 bg-teal-500 rounded-full flex items-center justify-center border-2 border-teal-400">
        <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/></svg>
      </div>
    </div>
  </header>
  <div class="bg-white border-b border-gray-200 shadow-sm sticky top-14 z-20"><div class="flex overflow-x-auto" id="navTabs"></div></div>
  <div class="bg-white border-b border-gray-200 px-6 py-4">
    <h1 class="text-xl font-semibold text-gray-800" id="pageTitle">Daily Summary</h1>
    <div class="flex items-center gap-3 mt-3">
      <span class="text-sm text-gray-500">Viewing:</span>
      <div id="pills"></div>
      <div class="relative">
        <button onclick="toggleDropdown()" class="inline-flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50">Select Clinics
          <svg class="w-4 h-4" id="chevron" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
        </button>
        <div id="dropdown" class="dropdown-menu absolute top-full left-0 mt-2 w-80 bg-white rounded-xl border border-gray-200 shadow-xl z-50">
          <div class="p-3 border-b border-gray-100 bg-gray-50">
            <input type="text" id="search" placeholder="Search clinics..." oninput="render()" class="w-full px-3 py-2 border border-gray-200 rounded-lg text-sm">
          </div>
          <div class="max-h-72 overflow-y-auto" id="clinicList"></div>
          <div class="p-3 border-t border-gray-100 bg-gray-50 flex justify-between">
            <span class="text-xs text-gray-500" id="count"></span>
            <button onclick="toggleDropdown()" class="px-3 py-1.5 bg-teal-500 text-white rounded-lg text-sm font-medium">Done</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div id="dateBar" class="bg-gradient-to-r from-white to-emerald-50 border-b border-gray-200 px-6 py-3 flex items-center justify-between">
    <div class="flex items-center gap-3">
      <div class="w-10 h-10 bg-gradient-to-br from-teal-500 to-teal-600 rounded-xl flex items-center justify-center shadow-md">
        <svg class="w-5 h-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg>
      </div>
      <div><span class="font-semibold text-gray-800 text-lg">Yesterday's Closing Summary</span><p class="text-xs text-gray-500">Monday, 19 Jan 2026 â€¢ Today is Tuesday, 20 Jan 2026</p></div>
    </div>
    <div class="flex items-center gap-2 bg-gradient-to-r from-emerald-500 to-teal-500 text-white px-4 py-2 rounded-full shadow-lg"><span class="text-lg">ðŸŽ‰</span><span class="font-semibold text-sm">Great Performance!</span></div>
  </div>
  <div class="p-6" id="content"></div>
  <div class="fixed bottom-4 right-4 bg-teal-500 text-white px-3 py-1.5 rounded-lg text-xs font-medium shadow-lg flex items-center gap-2"><span class="w-2 h-2 bg-white rounded-full animate-pulse"></span>Live Data</div>

<script>
let tab='daily',selected=['msg'],open=false;
const clinics=[{id:'msg',name:'Mediline Serangoon',short:'MSG'},{id:'mmp',name:'Mediline Medipoint',short:'MMP'},{id:'rdh',name:'RDH Clinic',short:'RDH'},{id:'tpy',name:'Toa Payoh Clinic',short:'TPY'},{id:'amk',name:'Ang Mo Kio Clinic',short:'AMK'},{id:'bd',name:'Bedok Clinic',short:'BD'},{id:'tp',name:'Tampines Clinic',short:'TP'},{id:'wl',name:'Woodlands Clinic',short:'WL'},{id:'jw',name:'Jurong West Clinic',short:'JW'},{id:'cck',name:'Choa Chu Kang Clinic',short:'CCK'}];
const data={
  msg:{mtd:145508.29,target:200000,daily:6450,variance:22958.29,today:10972.21,patients:70,doctors:[{name:'Dr Eugene Loke',initials:'EL',patients:56,revenue:10080.31},{name:'Dr Low',initials:'LW',patients:14,revenue:891.79}],payments:{paynow:2159.79,nets:672.45,app:4209.90,copay:3917.23,tpa:1549.90,chas:262.62}},
  mmp:{mtd:103571.94,target:150000,daily:4838.70,variance:11636.64,today:8738.61,patients:66,doctors:[{name:'Dr Lee Chien Nien',initials:'LCN',patients:31,revenue:4951.18},{name:'Dr Andre Ng',initials:'AN',patients:35,revenue:3787.43}],payments:{paynow:3117.08,nets:927.98,app:356.99,cash:561.51,tpa:2602.89,chas:491.01}},
  rdh:{mtd:103598.26,target:150000,daily:5770,variance:17048.26,today:14041.14,patients:64,doctors:[{name:'Dr Nigel',initials:'NG',patients:64,revenue:14041.14}],payments:{cash:441.27,nets:239.03,visa:2646.94,mastercard:2862.34,paynow:399.03,app:1373.40,copay:8135.89}}
};
clinics.forEach((c,i)=>{if(!data[c.id])data[c.id]={mtd:80000+i*5000,target:150000,daily:4838,variance:10000+i*1000,today:5000+i*500,patients:30+i*3,doctors:[{name:'Dr Smith',initials:'SM',patients:30+i*3,revenue:5000+i*500}],payments:{paynow:2000,nets:1000,app:1500,copay:1000,tpa:500,chas:200}}});
const tabs=[{id:'daily',label:'Daily Summary',icon:'<svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M22 12h-4l-3 9L9 3l-3 9H2"/></svg>'},{id:'revenue',label:'Revenue Target',icon:'<svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><circle cx="12" cy="12" r="10" stroke-width="2"/><circle cx="12" cy="12" r="6" stroke-width="2"/><circle cx="12" cy="12" r="2" stroke-width="2"/></svg>'},{id:'services',label:'Services',icon:'<svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.5 4.5l-1-1m1 1l-1 1m1-1L17 7m0 0l-3 3m3-3l1-1M14 10l-7 7m0 0l-2 2m2-2l2 2m-2-2H5m2 2v-2"/></svg>'},{id:'healthiersg',label:'HealthierSG',icon:'<svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/></svg>'},{id:'whatsapp',label:'WhatsApp',icon:'<svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/></svg>'},{id:'askeva',label:'Ask Eva',icon:'<svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"/></svg>'},{id:'settings',label:'Settings',icon:'<svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/></svg>'}];
const payLabels={paynow:'PayNow',nets:'NETS',app:'1doc App',copay:'Co-pay',cash:'Cash',tpa:'TPA',chas:'CHAS',visa:'Visa',mastercard:'MC'};
const payColors={paynow:'bg-teal-500',nets:'bg-blue-500',app:'bg-violet-500',copay:'bg-amber-500',cash:'bg-emerald-500',tpa:'bg-orange-500',chas:'bg-pink-500',visa:'bg-indigo-500',mastercard:'bg-red-500'};
const fmt=n=>n.toLocaleString('en-US',{minimumFractionDigits:2,maximumFractionDigits:2});

function get(){
  if(selected.length===1)return data[selected[0]];
  return{mtd:selected.reduce((s,id)=>s+(data[id]?.mtd||0),0),target:selected.reduce((s,id)=>s+(data[id]?.target||0),0),variance:selected.reduce((s,id)=>s+(data[id]?.variance||0),0),today:selected.reduce((s,id)=>s+(data[id]?.today||0),0),daily:selected.reduce((s,id)=>s+(data[id]?.daily||0),0),patients:selected.reduce((s,id)=>s+(data[id]?.patients||0),0),doctors:selected.flatMap(id=>data[id]?.doctors||[]),payments:Object.keys(payLabels).reduce((a,k)=>{a[k]=selected.reduce((s,id)=>s+(data[id]?.payments?.[k]||0),0);return a},{})};
}

function toggleDropdown(){open=!open;document.getElementById('dropdown').classList.toggle('open',open);document.getElementById('chevron').style.transform=open?'rotate(180deg)':'';}
function toggle(id){if(selected.includes(id)){if(selected.length>1)selected=selected.filter(x=>x!==id)}else selected=[...selected,id];render();}
function setTab(t){tab=t;document.getElementById('dateBar').style.display=t==='daily'?'flex':'none';render();}

function render(){
  const d=get(),search=document.getElementById('search')?.value?.toLowerCase()||'';
  let list=clinics.filter(c=>c.name.toLowerCase().includes(search)||c.short.toLowerCase().includes(search)).sort((a,b)=>a.name.localeCompare(b.name));
  const sel=list.filter(c=>selected.includes(c.id)),unsel=list.filter(c=>!selected.includes(c.id));list=[...sel,...unsel];
  const colors=['from-teal-400 to-teal-600','from-purple-400 to-purple-600','from-orange-400 to-orange-600','from-blue-400 to-blue-600','from-pink-400 to-pink-600','from-emerald-400 to-emerald-600'];
  
  document.getElementById('navTabs').innerHTML=tabs.map(t=>`<button onclick="setTab('${t.id}')" class="flex items-center gap-2 px-5 py-3.5 text-sm font-medium whitespace-nowrap border-b-2 transition-all ${tab===t.id?'border-teal-500 text-teal-600 bg-teal-50':'border-transparent text-gray-500 hover:bg-gray-50'}">${t.icon}${t.label}</button>`).join('');
  document.getElementById('pageTitle').textContent=tabs.find(t=>t.id===tab)?.label||'';
  document.getElementById('headerClinic').textContent=selected.length===1?clinics.find(c=>c.id===selected[0])?.name:`${selected.length} Clinics`;
  document.getElementById('pills').innerHTML=selected.length>3?`<span class="px-3 py-1.5 bg-teal-100 text-teal-700 rounded-full text-sm font-medium">${selected.length} Clinics</span>`:selected.map(id=>{const c=clinics.find(x=>x.id===id);return`<span class="inline-flex items-center gap-1 px-3 py-1.5 bg-teal-100 text-teal-700 rounded-full text-sm font-medium">${c?.short}${selected.length>1?`<button onclick="toggle('${id}')" class="ml-1 w-4 h-4 rounded-full bg-teal-200 hover:bg-teal-300 flex items-center justify-center">Ã—</button>`:''}</span>`}).join(' ');
  document.getElementById('clinicList').innerHTML=list.map((c,i)=>`<button onclick="toggle('${c.id}')" class="w-full flex items-center gap-3 px-4 py-2.5 hover:bg-gray-50 border-b border-gray-50"><div class="w-5 h-5 rounded border-2 flex items-center justify-center ${selected.includes(c.id)?'bg-teal-500 border-teal-500':'border-gray-300'}">${selected.includes(c.id)?'<svg class="w-3 h-3 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"/></svg>':''}</div><div class="w-9 h-9 rounded-lg flex items-center justify-center text-white font-bold text-xs shadow-sm bg-gradient-to-br ${colors[i%6]}">${c.short}</div><span class="text-sm font-medium text-gray-900">${c.name}</span></button>`).join('');
  document.getElementById('count').textContent=`${selected.length} of ${clinics.length} selected`;

  if(tab==='daily'){
    document.getElementById('content').innerHTML=`
      <div class="space-y-6">
        <div class="grid grid-cols-2 lg:grid-cols-4 gap-4">
          <div class="bg-white rounded-xl p-5 border border-gray-200 shadow-sm">
            <div class="flex items-center gap-3 mb-3"><div class="w-12 h-12 bg-gradient-to-br from-teal-400 to-teal-600 rounded-xl flex items-center justify-center shadow-lg"><svg class="w-6 h-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8V7m0 1v8m0 0v1"/></svg></div><span class="text-sm text-gray-500">MTD Revenue</span></div>
            <p class="text-2xl font-bold text-gray-900">S$${fmt(d.mtd)}</p>
            <p class="text-sm text-emerald-600 mt-1">+S$${fmt(d.variance)} above expected</p>
          </div>
          <div class="bg-white rounded-xl p-5 border border-gray-200 shadow-sm">
            <div class="flex items-center gap-3 mb-3"><div class="w-12 h-12 bg-gradient-to-br from-purple-400 to-purple-600 rounded-xl flex items-center justify-center shadow-lg"><svg class="w-6 h-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"/></svg></div><span class="text-sm text-gray-500">Patients Yesterday</span></div>
            <p class="text-2xl font-bold text-gray-900">${d.patients}</p>
            <p class="text-sm text-purple-600 mt-1">${d.doctors.length} doctors on duty</p>
          </div>
          <div class="bg-white rounded-xl p-5 border border-gray-200 shadow-sm">
            <div class="flex items-center gap-3 mb-3"><div class="w-12 h-12 bg-gradient-to-br from-blue-400 to-blue-600 rounded-xl flex items-center justify-center shadow-lg"><svg class="w-6 h-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M22 12h-4l-3 9L9 3l-3 9H2"/></svg></div><span class="text-sm text-gray-500">Today's Revenue</span></div>
            <p class="text-2xl font-bold text-gray-900">S$${fmt(d.today)}</p>
            <p class="text-sm text-blue-600 mt-1">Daily target: S$${fmt(d.daily)}</p>
          </div>
          <div class="bg-white rounded-xl p-5 border border-gray-200 shadow-sm">
            <div class="flex items-center gap-3 mb-3"><div class="w-12 h-12 bg-gradient-to-br from-emerald-400 to-emerald-600 rounded-xl flex items-center justify-center shadow-lg"><svg class="w-6 h-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><circle cx="12" cy="12" r="10" stroke-width="2"/><circle cx="12" cy="12" r="6" stroke-width="2"/><circle cx="12" cy="12" r="2" stroke-width="2"/></svg></div><span class="text-sm text-gray-500">Target Progress</span></div>
            <p class="text-2xl font-bold text-gray-900">${((d.mtd/d.target)*100).toFixed(1)}%</p>
            <div class="mt-2 bg-gray-200 rounded-full h-2.5"><div class="bg-gradient-to-r from-emerald-400 to-teal-500 h-full rounded-full" style="width:${Math.min((d.mtd/d.target)*100,100)}%"></div></div>
          </div>
        </div>
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
          <div class="bg-white rounded-xl border border-gray-200 shadow-sm">
            <div class="px-5 py-4 border-b border-gray-100"><h3 class="font-semibold text-gray-800">Doctor Performance</h3></div>
            <div class="p-5 space-y-3">${d.doctors.map(doc=>`<div class="flex items-center gap-4 p-4 bg-gray-50 rounded-xl"><div class="w-12 h-12 bg-gradient-to-br from-teal-500 to-cyan-500 rounded-xl flex items-center justify-center text-white font-bold shadow-lg">${doc.initials}</div><div class="flex-1"><p class="font-semibold text-gray-900">${doc.name}</p><p class="text-sm text-gray-500">${doc.patients} patients</p></div><div class="text-right"><p class="font-bold text-lg text-gray-900">S$${fmt(doc.revenue)}</p></div></div>`).join('')}</div>
          </div>
          <div class="bg-white rounded-xl border border-gray-200 shadow-sm">
            <div class="px-5 py-4 border-b border-gray-100"><h3 class="font-semibold text-gray-800">Payment Breakdown</h3></div>
            <div class="p-5 grid grid-cols-2 gap-3">${Object.entries(d.payments).filter(([k,v])=>v>0).map(([k,v])=>{const tot=Object.values(d.payments).reduce((a,b)=>a+b,0),pct=((v/tot)*100).toFixed(1);return`<div class="p-4 bg-gray-50 rounded-xl"><div class="flex items-center gap-2 mb-2"><div class="w-3 h-3 ${payColors[k]||'bg-gray-500'} rounded-full"></div><span class="text-sm font-medium text-gray-700">${payLabels[k]||k}</span></div><p class="text-xl font-bold text-gray-900">S$${fmt(v)}</p><div class="flex items-center gap-2 mt-1"><div class="flex-1 bg-gray-200 rounded-full h-1.5"><div class="${payColors[k]||'bg-gray-500'} h-1.5 rounded-full" style="width:${pct}%"></div></div><span class="text-xs text-gray-500">${pct}%</span></div></div>`}).join('')}</div>
          </div>
        </div>
      </div>`;
  }else{
    document.getElementById('content').innerHTML=`<div class="bg-white rounded-xl border border-gray-200 shadow-sm p-12 text-center"><div class="w-20 h-20 bg-gradient-to-br from-teal-400 to-teal-600 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg"><svg class="w-10 h-10 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/></svg></div><h3 class="text-xl font-semibold text-gray-800 mb-2">${tabs.find(t=>t.id===tab)?.label}</h3><p class="text-gray-500">Content coming soon...</p></div>`;
  }
}
document.addEventListener('DOMContentLoaded',render);
document.addEventListener('click',e=>{if(open&&!e.target.closest('#dropdown')&&!e.target.closest('button[onclick="toggleDropdown()"]')){open=false;document.getElementById('dropdown').classList.remove('open');document.getElementById('chevron').style.transform='';}});
</script>
</body>
</html>
